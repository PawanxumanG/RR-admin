<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RR College Admin - Live Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117;
            color: #e6edf3;
            margin: 0;
            overflow-x: hidden;
        }
        .glass-panel {
            background: rgba(22, 27, 34, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(48, 54, 61, 0.6);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #30363d;
            border-radius: 10px;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-up {
            animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        .loader {
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-top: 2px solid #f97316;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .event-preview-card {
            background-size: 400% 400%;
            animation: gradientFlow 8s ease infinite;
        }
    </style>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "htm": "https://esm.sh/htm@3.1.1"
      }
    }
    </script>
<link rel="stylesheet" href="/index.css">
</head>
<body>
    <div id="root"></div>

    <script type="module">
        import React, { useState, useEffect } from 'react';
        import ReactDOM from 'react-dom/client';
        import htm from 'htm';

        const html = htm.bind(React.createElement);

        const safeB64Encode = (str) => btoa(unescape(encodeURIComponent(str)));
        const safeB64Decode = (str) => decodeURIComponent(escape(atob(str)));

        const ADMIN_PASSWORD = "Pawan1645@";

        const App = () => {
            const [activeTab, setActiveTab] = useState('notice'); 
            const [isUnlocked, setIsUnlocked] = useState(false);
            const [passwordInput, setPasswordInput] = useState('');
            
            const [config, setConfig] = useState(() => {
                const saved = localStorage.getItem('rr_admin_config_v4');
                return saved ? JSON.parse(saved) : { token: '', owner: '', repo: '' };
            });

            // State for different files
            const [noticeData, setNoticeData] = useState({ show: true, title: '', message: [], updates: { version: '', items: [] } });
            const [announcementData, setAnnouncementData] = useState({ id: 'notice-default', show: false, title: '', message: '' });
            const [eventsData, setEventsData] = useState({ show: true, events: [] });

            const [shas, setShas] = useState({ notice: null, announcement: null, events: null });
            const [loading, setLoading] = useState(false);
            const [status, setStatus] = useState(null);
            const [showSettings, setShowSettings] = useState(false);

            useEffect(() => {
                localStorage.setItem('rr_admin_config_v4', JSON.stringify(config));
            }, [config]);

            const notify = (type, message) => {
                setStatus({ type, message });
                setTimeout(() => setStatus(null), 5000);
            };

            const handleUnlock = (e) => {
                e.preventDefault();
                if (passwordInput === ADMIN_PASSWORD) {
                    setIsUnlocked(true);
                    setPasswordInput('');
                    notify('success', 'Admin session unlocked.');
                } else {
                    notify('error', 'Authentication failed.');
                }
            };

            const handleLock = () => {
                setIsUnlocked(false);
                setShowSettings(false);
                setPasswordInput('');
            };

            const toggleSettings = () => {
                if (showSettings) {
                    handleLock();
                    notify('success', 'Security protocols active.');
                } else {
                    setShowSettings(true);
                }
            };

            const getCurrentFilePath = () => {
                if(activeTab === 'notice') return 'notice.json';
                if(activeTab === 'announcement') return 'announcement.json';
                return 'events.json';
            };

            const getDisplayName = () => {
                if(activeTab === 'notice') return 'Notice Board';
                if(activeTab === 'announcement') return 'Announcement Pop-up';
                return 'Events Manager';
            };

            const handleSync = async () => {
                if (!config.token || !config.owner || !config.repo) {
                    notify('error', 'Configuration missing. Contact admin.');
                    return;
                }
                setLoading(true);
                const path = getCurrentFilePath();
                try {
                    const url = `https://api.github.com/repos/${config.owner}/${config.repo}/contents/${path}`;
                    const res = await fetch(url, {
                        headers: { 'Authorization': `token ${config.token}`, 'Accept': 'application/vnd.github.v3+json' }
                    });
                    if (!res.ok) throw new Error(`Fetch failed for ${path}.`);
                    const data = await res.json();
                    const content = JSON.parse(safeB64Decode(data.content));
                    
                    if (activeTab === 'notice') {
                        setNoticeData(content);
                        setShas(prev => ({ ...prev, notice: data.sha }));
                    } else if (activeTab === 'announcement') {
                        setAnnouncementData(content);
                        setShas(prev => ({ ...prev, announcement: data.sha }));
                    } else {
                        setEventsData(content);
                        setShas(prev => ({ ...prev, events: data.sha }));
                    }
                    notify('success', `${getDisplayName()} data synchronized.`);
                } catch (err) {
                    notify('error', err.message);
                } finally {
                    setLoading(false);
                }
            };

            const handlePublish = async () => {
                const currentSha = shas[activeTab];
                if (!config.token || !currentSha) {
                    notify('error', 'Sync with GitHub before publishing.');
                    return;
                }
                setLoading(true);
                const path = getCurrentFilePath();
                let currentData;
                if (activeTab === 'notice') currentData = noticeData;
                else if (activeTab === 'announcement') currentData = { ...announcementData, id: 'ann-' + Date.now() };
                else currentData = eventsData;

                try {
                    const url = `https://api.github.com/repos/${config.owner}/${config.repo}/contents/${path}`;
                    const body = {
                        message: `Admin Update: ${getDisplayName()} via Control Center`,
                        content: safeB64Encode(JSON.stringify(currentData, null, 2)),
                        sha: currentSha
                    };
                    const res = await fetch(url, {
                        method: 'PUT',
                        headers: {
                            'Authorization': `token ${config.token}`,
                            'Accept': 'application/vnd.github.v3+json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(body)
                    });
                    if (!res.ok) throw new Error('Publication failed.');
                    const resData = await res.json();
                    
                    setShas(prev => ({ ...prev, [activeTab]: resData.content.sha }));
                    notify('success', `${getDisplayName()} is now live!`);
                } catch (err) {
                    notify('error', err.message);
                } finally {
                    setLoading(false);
                }
            };

            // Helpers for Events
            const addEvent = () => {
                const newEvent = {
                    title: 'New College Event',
                    content: ['Enter detail line 1', 'Enter detail line 2'],
                    theme: {
                        gradient: ["#ff9800", "#ff5722"],
                        glow: "rgba(255,152,0,.5)"
                    }
                };
                setEventsData({ ...eventsData, events: [newEvent, ...eventsData.events] });
            };

            const removeEvent = (index) => {
                const newEvents = eventsData.events.filter((_, i) => i !== index);
                setEventsData({ ...eventsData, events: newEvents });
            };

            const updateEvent = (index, field, value) => {
                const newEvents = [...eventsData.events];
                if (field === 'content') {
                    newEvents[index].content = value.split('\n');
                } else if (field === 'gradient1') {
                    newEvents[index].theme.gradient[0] = value;
                } else if (field === 'gradient2') {
                    newEvents[index].theme.gradient[1] = value;
                } else if (field === 'glow') {
                    newEvents[index].theme.glow = value;
                } else {
                    newEvents[index][field] = value;
                }
                setEventsData({ ...eventsData, events: newEvents });
            };

            // Helpers for Notice Changelog
            const addChangelogItem = () => {
                const currentItems = noticeData.updates?.items || [];
                setNoticeData({
                    ...noticeData,
                    updates: {
                        ...noticeData.updates,
                        items: [...currentItems, '']
                    }
                });
            };

            const updateChangelogItem = (index, value) => {
                const currentItems = [...(noticeData.updates?.items || [])];
                currentItems[index] = value;
                setNoticeData({
                    ...noticeData,
                    updates: {
                        ...noticeData.updates,
                        items: currentItems
                    }
                });
            };

            const removeChangelogItem = (index) => {
                const currentItems = (noticeData.updates?.items || []).filter((_, i) => i !== index);
                setNoticeData({
                    ...noticeData,
                    updates: {
                        ...noticeData.updates,
                        items: currentItems
                    }
                });
            };

            return html`
                <div className="min-h-screen p-4 md:p-8 max-w-7xl mx-auto flex flex-col gap-6">
                    
                    <!-- Header Navigation -->
                    <header className="flex flex-col xl:flex-row justify-between items-center gap-6 bg-[#161b22] p-5 rounded-[2.5rem] border border-slate-800 shadow-2xl relative">
                        <div className="flex items-center gap-4">
                            <div className="bg-gradient-to-br from-orange-500 to-amber-600 w-12 h-12 rounded-2xl flex items-center justify-center font-black text-xl text-white shadow-xl shadow-orange-900/40">RR</div>
                            <div>
                                <h1 className="text-lg font-black text-white tracking-tight">College Control Center</h1>
                                <p className="text-[9px] text-slate-500 font-bold uppercase tracking-[0.2em]">Management Suite v2.2</p>
                            </div>
                        </div>

                        <!-- Segmented Navigation -->
                        <div className="bg-black/40 p-1 rounded-2xl flex flex-wrap justify-center items-center gap-1 border border-slate-800/50">
                            ${['notice', 'announcement', 'events'].map(tab => html`
                                <button 
                                    key=${tab}
                                    onClick=${() => setActiveTab(tab)}
                                    className=${`px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all duration-300 ${activeTab === tab ? 'bg-orange-600 text-white shadow-lg' : 'text-slate-500 hover:text-slate-300'}`}
                                >
                                    ${tab === 'notice' ? 'Notices' : tab === 'announcement' ? 'Popup' : 'Events'}
                                </button>
                            `)}
                        </div>

                        <div className="flex flex-col items-center xl:items-end gap-2">
                            <div className="flex gap-2">
                                <button onClick=${toggleSettings} className=${`px-5 py-3 rounded-2xl text-xs font-black border transition-all ${showSettings ? 'bg-white text-black' : 'bg-slate-800 border-slate-700 text-slate-300'}`}>
                                    ${showSettings ? '‚úï Close' : '‚öôÔ∏è Config'}
                                </button>
                                <button onClick=${handleSync} disabled=${loading} className="px-5 py-3 bg-blue-600 hover:bg-blue-500 rounded-2xl text-xs font-black text-white shadow-lg shadow-blue-900/30 disabled:opacity-50 flex items-center gap-2">
                                    ${loading ? html`<div className="loader"></div>` : html`üîÑ Sync Live`}
                                </button>
                            </div>
                            <div className="flex items-center gap-3 mt-1 pr-2">
                                <span className="text-[10px] font-black uppercase tracking-widest text-slate-600">Pawan Ponnam</span>
                                <a href="https://wa.me/919867637326" target="_blank" className="px-3 py-1 bg-green-600 hover:bg-green-500 text-white text-[9px] font-black uppercase rounded-lg shadow-lg shadow-green-900/20 flex items-center gap-1 transition-all">
                                    <span>üí¨ Help</span>
                                </a>
                            </div>
                        </div>
                    </header>

                    <!-- Settings Panel -->
                    ${showSettings && html`
                        <section className="glass-panel p-8 rounded-[2.5rem] animate-slide-up bg-orange-500/5 border-orange-500/20 shadow-[0_0_40px_rgba(249,115,22,0.1)]">
                            ${!isUnlocked ? html`
                                <div className="max-w-md mx-auto py-6 text-center">
                                    <div className="mb-4 text-3xl">üîí</div>
                                    <h3 className="text-sm font-black text-white uppercase tracking-widest mb-2">Restricted Area</h3>
                                    <form onSubmit=${handleUnlock} className="flex flex-col gap-3">
                                        <input type="password" autoFocus value=${passwordInput} onChange=${e => setPasswordInput(e.target.value)} className="w-full bg-black/60 border border-slate-800 p-4 rounded-2xl focus:border-orange-500 outline-none text-center font-mono tracking-widest text-lg" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"/>
                                        <button type="submit" className="bg-orange-600 hover:bg-orange-500 text-white font-black py-4 rounded-2xl text-xs uppercase tracking-widest">Authorize Access</button>
                                    </form>
                                </div>
                            ` : html`
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <div>
                                        <label className="text-[10px] font-black text-slate-500 uppercase mb-2 block">Access Token</label>
                                        <input type="password" value=${config.token} onChange=${e => setConfig({...config, token: e.target.value})} className="w-full bg-black border border-slate-800 p-4 rounded-2xl focus:border-orange-500 outline-none text-sm"/>
                                    </div>
                                    <div>
                                        <label className="text-[10px] font-black text-slate-500 uppercase mb-2 block">Repo Owner</label>
                                        <input value=${config.owner} onChange=${e => setConfig({...config, owner: e.target.value})} className="w-full bg-black border border-slate-800 p-4 rounded-2xl focus:border-orange-500 outline-none text-sm"/>
                                    </div>
                                    <div>
                                        <label className="text-[10px] font-black text-slate-500 uppercase mb-2 block">Repo Name</label>
                                        <input value=${config.repo} onChange=${e => setConfig({...config, repo: e.target.value})} className="w-full bg-black border border-slate-800 p-4 rounded-2xl focus:border-orange-500 outline-none text-sm"/>
                                    </div>
                                </div>
                            `}
                        </section>
                    `}

                    <!-- Notifications -->
                    ${status && html`
                        <div className=${`fixed bottom-8 right-8 z-[100] p-4 rounded-2xl border shadow-2xl flex items-center gap-3 animate-slide-up backdrop-blur-xl ${status.type === 'success' ? 'bg-green-600/10 border-green-500 text-green-400' : 'bg-red-600/10 border-red-500 text-red-400'}`}>
                            <span className="font-bold text-xs tracking-wide uppercase">${status.message}</span>
                        </div>
                    `}

                    <div className="grid grid-cols-1 lg:grid-cols-12 gap-8">
                        
                        <!-- Main Editor Section -->
                        <div className="lg:col-span-8 space-y-8">
                            <section className="glass-panel p-8 md:p-10 rounded-[3rem] shadow-2xl relative overflow-hidden group">
                                <div className="flex justify-between items-center mb-8 pb-6 border-b border-slate-800/50">
                                    <div>
                                        <p className="text-[10px] font-black text-orange-500 uppercase tracking-[0.4em] mb-1">Editor Session</p>
                                        <h2 className="text-2xl font-black text-white uppercase tracking-tight">${getDisplayName()}</h2>
                                    </div>
                                    <button 
                                        onClick=${() => {
                                            if(activeTab === 'notice') setNoticeData({...noticeData, show: !noticeData.show});
                                            else if(activeTab === 'announcement') setAnnouncementData({...announcementData, show: !announcementData.show});
                                            else setEventsData({...eventsData, show: !eventsData.show});
                                        }}
                                        className=${`px-5 py-2 rounded-full text-[9px] font-black transition-all border-2 ${
                                            (activeTab === 'notice' ? noticeData.show : activeTab === 'announcement' ? announcementData.show : eventsData.show) ? 'bg-green-600/10 border-green-500 text-green-400' : 'bg-slate-800 border-slate-700 text-slate-500'
                                        }`}
                                    >
                                        ‚óè PUBLIC STATUS
                                    </button>
                                </div>

                                <div className="space-y-8">
                                    ${activeTab === 'events' ? html`
                                        <!-- Events Array Editor -->
                                        <div className="space-y-10">
                                            <button onClick=${addEvent} className="w-full py-4 border-2 border-dashed border-slate-800 rounded-3xl text-slate-500 hover:text-orange-500 hover:border-orange-500 transition-all font-black uppercase tracking-widest text-[10px]">
                                                + Add New Event Card
                                            </button>
                                            <div className="space-y-12">
                                                ${eventsData.events.map((ev, idx) => html`
                                                    <div key=${idx} className="bg-black/40 p-6 rounded-[2rem] border border-slate-800/50 relative group/event">
                                                        <button onClick=${() => removeEvent(idx)} className="absolute -top-3 -right-3 w-8 h-8 bg-red-600 rounded-full flex items-center justify-center text-white text-xs opacity-0 group-hover/event:opacity-100 transition-opacity shadow-lg">‚úï</button>
                                                        <div className="grid grid-cols-1 gap-6">
                                                            <div>
                                                                <label className="text-[9px] font-black text-slate-600 uppercase mb-2 block tracking-widest pl-1">Event Headline</label>
                                                                <input value=${ev.title} onChange=${e => updateEvent(idx, 'title', e.target.value)} className="w-full bg-[#0d1117] border border-slate-800 p-4 rounded-2xl text-lg font-bold text-white outline-none focus:border-orange-500"/>
                                                            </div>
                                                            <div>
                                                                <label className="text-[9px] font-black text-slate-600 uppercase mb-2 block tracking-widest pl-1">Description (Full Text)</label>
                                                                <textarea value=${ev.content.join('\n')} onChange=${e => updateEvent(idx, 'content', e.target.value)} rows="6" className="w-full bg-[#0d1117] border border-slate-800 p-4 rounded-2xl text-sm text-slate-400 outline-none focus:border-orange-500 resize-none custom-scrollbar" placeholder="One point per line..."></textarea>
                                                            </div>
                                                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 items-end">
                                                                <div>
                                                                    <label className="text-[8px] font-black text-slate-600 uppercase mb-2 block pl-1 tracking-tighter">Color 1</label>
                                                                    <input type="color" value=${ev.theme?.gradient[0]} onChange=${e => updateEvent(idx, 'gradient1', e.target.value)} className="w-full h-10 bg-transparent cursor-pointer rounded-lg border-none"/>
                                                                </div>
                                                                <div>
                                                                    <label className="text-[8px] font-black text-slate-600 uppercase mb-2 block pl-1 tracking-tighter">Color 2</label>
                                                                    <input type="color" value=${ev.theme?.gradient[1]} onChange=${e => updateEvent(idx, 'gradient2', e.target.value)} className="w-full h-10 bg-transparent cursor-pointer rounded-lg border-none"/>
                                                                </div>
                                                                <div className="col-span-2">
                                                                    <label className="text-[8px] font-black text-slate-600 uppercase mb-2 block pl-1 tracking-tighter">Glow Effect (RGBA)</label>
                                                                    <input value=${ev.theme?.glow} onChange=${e => updateEvent(idx, 'glow', e.target.value)} className="w-full bg-[#0d1117] border border-slate-800 p-2 rounded-xl text-[10px] text-slate-300 outline-none" placeholder="rgba(0,0,0,0.5)"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                `)}
                                            </div>
                                        </div>
                                    ` : html`
                                        <!-- Single Object Editors (Notice / Announcement) -->
                                        <div className="space-y-8">
                                            <div>
                                                <label className="text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-3 pl-1">Primary Headline</label>
                                                <input 
                                                    value=${activeTab === 'notice' ? noticeData.title : announcementData.title}
                                                    onChange=${e => activeTab === 'notice' ? setNoticeData({...noticeData, title: e.target.value}) : setAnnouncementData({...announcementData, title: e.target.value})}
                                                    className="w-full bg-[#0d1117] border border-slate-800 p-5 rounded-3xl text-xl font-bold text-white focus:border-orange-500 outline-none transition-all shadow-inner"
                                                    placeholder="Headline..."
                                                />
                                            </div>
                                            <div>
                                                <label className="text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-3 pl-1">Body Content (Full Text)</label>
                                                <textarea 
                                                    value=${activeTab === 'notice' ? noticeData.message.join('\n') : announcementData.message}
                                                    onChange=${e => activeTab === 'notice' ? setNoticeData({...noticeData, message: e.target.value.split('\n')}) : setAnnouncementData({...announcementData, message: e.target.value})}
                                                    rows="12"
                                                    className="w-full bg-[#0d1117] border border-slate-800 p-5 rounded-3xl text-slate-300 leading-relaxed focus:border-orange-500 outline-none transition-all resize-none custom-scrollbar text-base shadow-inner"
                                                    placeholder="Body text..."
                                                ></textarea>
                                            </div>
                                            ${activeTab === 'notice' && html`
                                                <div className="pt-8 border-t border-slate-800/50 flex flex-col gap-8">
                                                    <div>
                                                        <label className="text-[9px] font-black text-slate-600 uppercase mb-2 block tracking-widest">Version Tag</label>
                                                        <input 
                                                            value=${noticeData.updates?.version || ''} 
                                                            onChange=${e => setNoticeData({...noticeData, updates: {...noticeData.updates, version: e.target.value}})} 
                                                            className="w-full bg-black/40 border border-slate-800 p-4 rounded-2xl text-sm text-orange-500 font-black outline-none shadow-inner focus:border-orange-500/50"
                                                            placeholder="e.g. New App Updates v2.1"
                                                        />
                                                    </div>
                                                    <div>
                                                        <div className="flex justify-between items-center mb-4">
                                                            <label className="text-[9px] font-black text-slate-600 uppercase block tracking-widest">Changelog Items</label>
                                                            <button onClick=${addChangelogItem} className="text-[8px] font-black uppercase text-orange-500 bg-orange-500/10 px-3 py-1.5 rounded-lg hover:bg-orange-500/20 transition-all">+ Add New Line</button>
                                                        </div>
                                                        <div className="space-y-3 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar">
                                                            ${(noticeData.updates?.items || []).map((item, idx) => html`
                                                                <div key=${idx} className="flex gap-3 group/item animate-slide-up">
                                                                    <div className="flex-1 relative">
                                                                        <span className="absolute left-4 top-4 text-orange-500/40 text-[10px] font-black">‚Ä¢</span>
                                                                        <input 
                                                                            value=${item} 
                                                                            onChange=${e => updateChangelogItem(idx, e.target.value)}
                                                                            className="w-full bg-black/30 border border-slate-800/50 pl-8 pr-4 py-3 rounded-xl text-xs text-slate-400 focus:text-slate-200 outline-none focus:border-orange-500/30 focus:bg-black/50 transition-all"
                                                                            placeholder="Enter update detail..."
                                                                        />
                                                                    </div>
                                                                    <button 
                                                                        onClick=${() => removeChangelogItem(idx)}
                                                                        className="w-10 h-10 bg-red-900/10 hover:bg-red-500 text-red-500 hover:text-white rounded-xl flex items-center justify-center transition-all opacity-40 group-hover/item:opacity-100"
                                                                    >
                                                                        <span className="text-xs">‚úï</span>
                                                                    </button>
                                                                </div>
                                                            `)}
                                                            ${(noticeData.updates?.items || []).length === 0 && html`
                                                                <div className="text-center py-8 bg-black/20 rounded-2xl border border-dashed border-slate-800/50">
                                                                    <p className="text-[10px] font-black text-slate-700 uppercase tracking-widest">No changelog items added</p>
                                                                </div>
                                                            `}
                                                        </div>
                                                    </div>
                                                </div>
                                            `}
                                        </div>
                                    `}
                                </div>

                                <button 
                                    onClick=${handlePublish}
                                    disabled=${loading || !shas[activeTab]}
                                    className="w-full mt-12 py-6 bg-gradient-to-r from-orange-600 to-amber-500 hover:from-orange-500 hover:to-amber-400 text-white font-black text-lg rounded-3xl shadow-2xl transition-all active:scale-[0.97] disabled:opacity-20 flex items-center justify-center gap-4 group uppercase tracking-widest"
                                >
                                    ${loading ? html`<div className="loader"></div>` : html`<span>üöÄ APPLY LIVE CHANGES</span>`}
                                </button>
                            </section>
                        </div>

                        <!-- Side Preview Section -->
                        <div className="lg:col-span-4 space-y-8">
                            <section className="glass-panel p-8 rounded-[3rem] overflow-hidden border-slate-800/50 h-full flex flex-col">
                                <h3 className="text-[10px] font-black mb-8 flex items-center gap-3 text-slate-500 uppercase tracking-[0.3em]">
                                    <span className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span> Dynamic Preview (Full View)
                                </h3>
                                
                                <div className="flex-1 min-h-[500px] bg-[#080a0e] rounded-[2.5rem] border border-slate-900 p-6 relative flex flex-col gap-6 overflow-y-auto custom-scrollbar shadow-inner">
                                    
                                    ${activeTab === 'events' ? html`
                                        <!-- Events List Preview -->
                                        ${eventsData.events.length === 0 ? html`<div className="h-full flex flex-col items-center justify-center opacity-10 text-slate-500 uppercase text-[10px] font-black tracking-widest">No Events Found</div>` : eventsData.events.map((ev, i) => html`
                                            <div key=${i} className="event-preview-card p-6 rounded-[2rem] text-white shadow-2xl" style=${{
                                                background: `linear-gradient(135deg, ${ev.theme?.gradient?.join(',') || '#ff9800,#ff5722'})`,
                                                boxShadow: `0 0 25px ${ev.theme?.glow || 'rgba(0,0,0,0.3)'}`
                                            }}>
                                                <h4 className="font-black text-lg uppercase mb-3 leading-tight break-words">${ev.title || 'Event Title'}</h4>
                                                <div className="space-y-2 opacity-90">
                                                    ${ev.content.map((line, li) => html`<p key=${li} className="text-[11px] font-medium leading-relaxed break-words">‚Ä¢ ${line}</p>`)}
                                                </div>
                                            </div>
                                        `)}
                                    ` : activeTab === 'notice' ? html`
                                        <!-- Notice Preview -->
                                        <div className="w-full bg-[#161a22] p-6 rounded-[2rem] border border-slate-800 shadow-2xl relative overflow-hidden">
                                            <div className="absolute top-0 left-0 w-full h-1 bg-orange-600"></div>
                                            <h4 className="text-orange-500 font-black text-xl uppercase tracking-tight mb-4 break-words">${noticeData.title || 'Notice Title'}</h4>
                                            <div className="space-y-3">
                                                ${noticeData.message.map((line, i) => html`<p key=${i} className="text-slate-400 text-xs leading-relaxed font-medium break-words">${line}</p>`)}
                                            </div>
                                            ${noticeData.updates?.version && html`
                                                <div className="mt-8 pt-4 border-t border-slate-800/80 flex flex-col gap-2 text-[8px] font-black uppercase text-slate-600">
                                                    <span className="text-orange-500 break-words">${noticeData.updates.version}</span>
                                                    <div className="flex flex-col gap-1">
                                                        ${(noticeData.updates.items || []).map((item, ii) => html`<span key=${ii} className="text-slate-500 break-words">‚Ä¢ ${item}</span>`)}
                                                    </div>
                                                </div>
                                            `}
                                        </div>
                                    ` : html`
                                        <!-- Popup Preview -->
                                        <div className=${`absolute inset-0 bg-black/95 flex items-center justify-center p-6 transition-all ${announcementData.show ? 'opacity-100' : 'opacity-0'}`}>
                                            <div className="bg-[#1e2329] p-8 rounded-[2.5rem] border border-slate-700 text-center shadow-2xl shadow-orange-900/20 max-h-[90%] overflow-y-auto custom-scrollbar">
                                                <div className="text-4xl mb-6">üì¢</div>
                                                <h4 className="text-white font-black text-xl uppercase mb-4 break-words">${announcementData.title || 'System Alert'}</h4>
                                                <p className="text-slate-400 text-xs leading-relaxed mb-8 break-words">${announcementData.message || 'Announcement content...'}</p>
                                                <div className="py-3 bg-orange-600 text-white text-[9px] font-black uppercase rounded-2xl tracking-widest">Dismiss Modal</div>
                                            </div>
                                        </div>
                                    `}
                                </div>
                            </section>
                        </div>
                    </div>

                    <footer className="text-center pt-24 pb-12 flex flex-col items-center gap-4">
                        <div className="flex items-center gap-6 opacity-30">
                            <div className="h-px w-12 bg-slate-500"></div>
                            <span className="text-[7px] font-black uppercase tracking-[0.8em] text-slate-500">Official System</span>
                            <div className="h-px w-12 bg-slate-500"></div>
                        </div>
                        
                        <div className="flex flex-col items-center gap-1">
                            <p className="text-slate-700 text-[9px] font-black uppercase tracking-[0.4em]">RR International College</p>
                            <div className="flex items-center gap-3 bg-[#161b22] px-6 py-3 rounded-2xl border border-slate-800/50 shadow-xl whitespace-nowrap overflow-hidden">
                                <span className="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Made By</span>
                                <span className="h-4 w-px bg-slate-800"></span>
                                <span className="text-[11px] font-black uppercase tracking-[0.2em] text-orange-500">Pawan Ponnam</span>
                            </div>
                        </div>
                        
                        <p className="text-[7px] font-bold text-slate-800 uppercase tracking-[0.3em]">Encrypted Environment v2.2</p>
                    </footer>
                </div>
            `;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>