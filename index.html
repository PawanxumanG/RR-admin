<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RR College Admin - Management Suite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117;
            color: #e6edf3;
            margin: 0;
            overflow-x: hidden;
        }
        .glass-panel {
            background: rgba(22, 27, 34, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(48, 54, 61, 0.6);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #30363d; border-radius: 10px; }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-up { animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }

        .name-highlight {
            color: #f97316 !important;
            text-shadow: 0 0 15px rgba(249, 115, 22, 0.4);
            font-weight: 900 !important;
        }
        
        .sync-toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            background: #111827;
            border: 2px solid #10b981;
            box-shadow: 0 0 60px rgba(16, 185, 129, 0.4);
            border-radius: 2rem;
            padding: 1.5rem 3rem;
            color: #10b981;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            animation: toastIn 1.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            font-size: 0.8rem;
            white-space: nowrap;
        }
        @keyframes toastIn {
            0% { opacity: 0; transform: translate(-50%, -40%) scale(0.9); }
            15% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            85% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -60%) scale(1.1); }
        }
        
        input, textarea, select {
            background-color: #0d121b !important;
            border: 1px solid #1f2937 !important;
            border-radius: 1rem !important;
            padding: 1rem 1.5rem !important;
            color: white !important;
            outline: none !important;
            transition: all 0.2s;
            font-size: 14px;
        }
        input:focus, textarea:focus { border-color: #f97316 !important; background-color: #111827 !important; }
        
        .label-text {
            font-size: 9px;
            font-weight: 900;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 0.6rem;
            display: block;
        }

        .loader {
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-top: 2px solid #f97316;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .btn-apply {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            padding: 1.5rem;
            border-radius: 1.5rem;
            box-shadow: 0 10px 30px rgba(234, 88, 12, 0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .btn-apply:hover { transform: translateY(-2px); box-shadow: 0 15px 40px rgba(234, 88, 12, 0.5); }
        .btn-apply:active { transform: translateY(0); }

        .btn-nav {
            padding: 0.75rem 1.5rem;
            border-radius: 0.8rem;
            font-size: 10px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            transition: all 0.2s;
        }
        .expires-pill {
            background: #1a0b0d;
            border: 1px solid #3d1417;
            padding: 0.3rem 1rem;
            border-radius: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: #dc2626;
            font-weight: 900;
            font-size: 10px;
            letter-spacing: 0.1em;
        }
    </style>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "htm": "https://esm.sh/htm@3.1.1"
      }
    }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="module">
        import React, { useState, useEffect } from 'react';
        import ReactDOM from 'react-dom/client';
        import htm from 'htm';

        const html = htm.bind(React.createElement);

        const safeB64Encode = (str) => btoa(unescape(encodeURIComponent(str)));
        const safeB64Decode = (str) => decodeURIComponent(escape(atob(str)));

        const MASTER_PASSWORD = "Pawan1645@";
        const BYPASS_KEY = "RR-2025";
        const SESSION_TIME = 3600; // 1 hour in seconds

        const App = () => {
            const [activeTab, setActiveTab] = useState('notice'); 
            
            // Helper to get current remaining time
            const getRemainingSeconds = () => {
                const expiry = localStorage.getItem('rr_session_expiry');
                if (!expiry) return 0;
                const remaining = Math.floor((parseInt(expiry) - Date.now()) / 1000);
                return Math.max(0, remaining);
            };

            // Deriving initial unlocked state strictly from expiry timestamp
            const [isUnlocked, setIsUnlocked] = useState(() => {
                const unlockedFlag = localStorage.getItem('rr_admin_unlocked') === 'true';
                return unlockedFlag && getRemainingSeconds() > 0;
            });

            const [timeLeft, setTimeLeft] = useState(getRemainingSeconds());

            const [config, setConfig] = useState(() => {
                const saved = localStorage.getItem('rr_admin_config_v14');
                return saved ? JSON.parse(saved) : { token: '', owner: 'PawanxumanG', repo: 'rr-college' };
            });

            const [noticeData, setNoticeData] = useState({ show: true, title: '', message: [], updates: { version: '', items: [] } });
            const [announcementData, setAnnouncementData] = useState({ show: false, title: '', message: '' });
            const [eventsData, setEventsData] = useState({ show: true, events: [] });
            const [loginData, setLoginData] = useState({ keys: [] });

            const [shas, setShas] = useState({ notice: null, popup: null, events: null, security: null });
            const [loading, setLoading] = useState(false);
            const [status, setStatus] = useState(null);
            const [isSecurityUnlocked, setIsSecurityUnlocked] = useState(false);
            const [securityPinInput, setSecurityPinInput] = useState('');
            const [passwordInput, setPasswordInput] = useState('');

            // LocalStorage persistence for config
            useEffect(() => {
                localStorage.setItem('rr_admin_config_v14', JSON.stringify(config));
            }, [config]);

            // Sync unlocked status to LocalStorage for persistence
            useEffect(() => {
                localStorage.setItem('rr_admin_unlocked', isUnlocked);
            }, [isUnlocked]);

            // Persistent Session Timer Logic
            useEffect(() => {
                let timer;
                if (isUnlocked) {
                    timer = setInterval(() => {
                        const remaining = getRemainingSeconds();
                        if (remaining <= 0) {
                            handleLogout();
                        } else {
                            setTimeLeft(remaining);
                        }
                    }, 1000);
                }
                return () => clearInterval(timer);
            }, [isUnlocked]);

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            };

            const notify = (message) => {
                setStatus(message);
                setTimeout(() => setStatus(null), 3000);
            };

            const handleUnlock = (e) => {
                e.preventDefault();
                const input = passwordInput.trim();
                if (input === MASTER_PASSWORD || input === BYPASS_KEY) {
                    const expiryTimestamp = Date.now() + (SESSION_TIME * 1000);
                    localStorage.setItem('rr_session_expiry', expiryTimestamp.toString());
                    setIsUnlocked(true);
                    setTimeLeft(SESSION_TIME);
                    setPasswordInput('');
                    notify('System Unlocked: Welcome Admin');
                } else {
                    notify('Authorization Failed');
                }
            };

            const handleLogout = () => {
                setIsUnlocked(false);
                setIsSecurityUnlocked(false);
                localStorage.removeItem('rr_admin_unlocked');
                localStorage.removeItem('rr_session_expiry');
                setTimeLeft(0);
                notify('Session Ended');
            };

            const unlockSecurityTab = (e) => {
                e.preventDefault();
                if (securityPinInput === MASTER_PASSWORD) {
                    setIsSecurityUnlocked(true);
                    setSecurityPinInput('');
                    handleSync('security');
                } else {
                    notify('Access Denied');
                }
            };

            const getPublicStatus = () => {
                if (activeTab === 'notice') return noticeData.show;
                if (activeTab === 'popup') return announcementData.show;
                if (activeTab === 'events') return eventsData.show;
                return true;
            };

            const togglePublicStatus = () => {
                if (activeTab === 'notice') setNoticeData(prev => ({ ...prev, show: !prev.show }));
                else if (activeTab === 'popup') setAnnouncementData(prev => ({ ...prev, show: !prev.show }));
                else if (activeTab === 'events') setEventsData(prev => ({ ...prev, show: !prev.show }));
                notify(`${activeTab.toUpperCase()} visibility toggled.`);
            };

            const handleSync = async (forcedTab = null) => {
                const target = forcedTab || activeTab;
                if (!config.token || !config.owner || !config.repo) {
                    notify('Missing Configuration');
                    return;
                }
                setLoading(true);
                const mapping = { notice: 'notice.json', popup: 'announcement.json', events: 'events.json', security: 'login.json' };
                const path = mapping[target];
                try {
                    const url = `https://api.github.com/repos/${config.owner}/${config.repo}/contents/${path}`;
                    const res = await fetch(url, {
                        headers: { 'Authorization': `token ${config.token}`, 'Accept': 'application/vnd.github.v3+json' }
                    });
                    if (!res.ok) throw new Error(`Fetch failed: ${res.status}`);
                    const data = await res.json();
                    const content = JSON.parse(safeB64Decode(data.content));
                    
                    if (target === 'notice') { setNoticeData(content); setShas(p => ({...p, notice: data.sha})); }
                    else if (target === 'popup') { setAnnouncementData(content); setShas(p => ({...p, popup: data.sha})); }
                    else if (target === 'events') { setEventsData(content); setShas(p => ({...p, events: data.sha})); }
                    else if (target === 'security') { setLoginData(content); setShas(p => ({...p, security: data.sha})); }
                    
                    notify(`Sync Successful: ${path}`);
                } catch (err) {
                    notify(`Sync Error: ${err.message}`);
                } finally {
                    setLoading(false);
                }
            };

            const handlePublish = async () => {
                const currentSha = shas[activeTab];
                if (!config.token || !currentSha) return notify('Sync first to obtain SHA');
                setLoading(true);
                const mapping = { notice: 'notice.json', popup: 'announcement.json', events: 'events.json', security: 'login.json' };
                const path = mapping[activeTab];
                const dataToUpload = activeTab === 'notice' ? noticeData : activeTab === 'popup' ? announcementData : activeTab === 'events' ? eventsData : loginData;

                try {
                    const url = `https://api.github.com/repos/${config.owner}/${config.repo}/contents/${path}`;
                    const body = {
                        message: `Admin Update: ${path} by Pawan`,
                        content: safeB64Encode(JSON.stringify(dataToUpload, null, 2)),
                        sha: currentSha
                    };
                    const res = await fetch(url, {
                        method: 'PUT',
                        headers: { 'Authorization': `token ${config.token}`, 'Content-Type': 'application/json' },
                        body: JSON.stringify(body)
                    });
                    if (!res.ok) throw new Error('Failed to push changes');
                    const resData = await res.json();
                    setShas(prev => ({ ...prev, [activeTab]: resData.content.sha }));
                    notify(`${path} is now LIVE!`);
                } catch (err) {
                    notify(err.message);
                } finally {
                    setLoading(false);
                }
            };

            if (!isUnlocked) {
                return html`
                    <div className="min-h-screen flex items-center justify-center p-6 bg-[#080a0e]">
                        <div className="glass-panel w-full max-w-md p-12 rounded-[3.5rem] text-center border-orange-500/10 shadow-2xl animate-slide-up">
                            <div className="bg-[#f97316] w-16 h-16 rounded-2xl flex items-center justify-center font-black text-3xl text-white mx-auto mb-10 shadow-2xl shadow-orange-900/40">RR</div>
                            <h2 className="text-2xl font-black text-white uppercase tracking-tight mb-2">College Control Center</h2>
                            <p className="text-[10px] text-slate-500 font-bold uppercase tracking-[0.4em] mb-14">System Secure Gateway</p>
                            <form onSubmit=${handleUnlock} className="space-y-6">
                                <input type="text" value=${passwordInput} onChange=${e => setPasswordInput(e.target.value)} className="w-full text-center font-mono tracking-widest text-lg py-5 bg-[#050505] border-slate-800" placeholder="ENTER ACCESS KEY"/>
                                <button type="submit" className="w-full bg-orange-600 hover:bg-orange-500 text-white font-black py-5 rounded-[2rem] text-xs uppercase tracking-widest shadow-xl transition-all">ENTER DASHBOARD</button>
                                <button type="button" onClick=${() => window.open('https://wa.me/919867637326', '_blank')} className="w-full bg-[#10b981] text-white font-black py-4 rounded-[2rem] text-[10px] uppercase tracking-widest flex items-center justify-center gap-2">üí¨ HELP</button>
                            </form>
                            <div className="flex flex-col items-center gap-2 mt-12 animate-slide-up">
                                <div className="bg-[#111827] border border-orange-500/20 px-8 py-3.5 rounded-[2rem] shadow-xl flex items-center gap-4">
                                    <span className="text-[10px] font-black text-slate-500 uppercase tracking-widest">Made By</span>
                                    <span className="h-4 w-px bg-slate-800"></span>
                                    <span className="text-[12px] uppercase tracking-[0.2em] name-highlight">Pawan Ponnam</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            return html`
                <div className="min-h-screen p-4 md:p-8 max-w-7xl mx-auto flex flex-col gap-8">
                    ${status && html`<div className="sync-toast">${status}</div>`}
                    
                    <header className="flex flex-col items-center gap-8 bg-[#111827] p-10 rounded-[2.5rem] border border-slate-800 shadow-2xl text-center">
                        <div className="flex flex-col items-center gap-2">
                            <div className="bg-[#f97316] w-14 h-14 rounded-2xl flex items-center justify-center font-black text-2xl text-white shadow-xl shadow-orange-900/40">RR</div>
                            <div>
                                <h1 className="text-xl font-bold text-white tracking-tight">College Control Center</h1>
                                <p className="text-[10px] text-slate-500 font-bold uppercase tracking-[0.2em] mt-1">MANAGEMENT SUITE V4.0</p>
                            </div>
                        </div>
                        
                        <div className="bg-black/60 p-2 rounded-2xl flex items-center gap-1 border border-slate-800/80">
                            ${['notice', 'popup', 'events', 'security'].map(tab => html`
                                <button key=${tab} onClick=${() => { setActiveTab(tab); if(tab !== 'security') setIsSecurityUnlocked(false); }} className=${`btn-nav ${activeTab === tab ? 'bg-[#f97316] text-white shadow-lg' : 'text-slate-500 hover:text-white'}`}>
                                    ${tab === 'security' ? 'üîí Security' : tab.toUpperCase()}
                                </button>
                            `)}
                        </div>

                        <div className="expires-pill">
                            <span className="w-1.5 h-1.5 rounded-full bg-red-600 animate-pulse"></span>
                            <span>EXPIRES: ${formatTime(timeLeft)}</span>
                        </div>

                        <div className="flex items-center gap-4">
                            <button onClick=${handleLogout} className="px-10 py-3.5 bg-[#1f2937] hover:bg-slate-700 rounded-2xl text-[10px] font-black uppercase text-slate-300 shadow-xl transition-all">LOGOUT</button>
                            <button onClick=${() => handleSync()} className="px-10 py-3.5 bg-[#3b82f6] hover:bg-blue-500 rounded-2xl text-[10px] font-black uppercase text-white shadow-lg flex items-center gap-2 transition-all">
                                ${loading ? html`<div className="loader"></div>` : html`üîÑ SYNC LIVE`}
                            </button>
                        </div>

                        <div className="flex flex-col items-center gap-3">
                            <span className="text-[10px] font-black text-slate-600 uppercase tracking-[0.4em]">PAWAN PONNAM</span>
                            <button onClick=${() => window.open('https://wa.me/919867637326', '_blank')} className="bg-[#10b981] hover:bg-green-500 text-white px-8 py-2.5 rounded-xl text-[10px] font-black uppercase flex items-center gap-2 shadow-xl transition-all active:scale-95">
                                üí¨ HELP
                            </button>
                        </div>
                    </header>

                    <div className="grid grid-cols-1 lg:grid-cols-12 gap-8 flex-1">
                        <main className="lg:col-span-8 animate-slide-up">
                            <section className="glass-panel p-8 md:p-12 rounded-[3.5rem] shadow-2xl min-h-[600px] flex flex-col">
                                <div className="flex flex-col mb-10">
                                    <span className="text-[10px] font-black text-orange-500 uppercase tracking-[0.3em] mb-1">Editor Session</span>
                                    <div className="flex justify-between items-center">
                                        <h2 className="text-3xl font-black text-white uppercase tracking-tighter">
                                            ${activeTab === 'notice' ? 'Notice Board' : activeTab === 'popup' ? 'Announcement Pop-up' : activeTab === 'events' ? 'Events Manager' : 'Security Board'}
                                        </h2>
                                        ${activeTab !== 'security' && html`
                                            <button onClick=${togglePublicStatus} className=${`px-5 py-2.5 rounded-full text-[10px] font-black tracking-widest transition-all border-2 ${getPublicStatus() ? 'bg-green-600/10 border-green-500 text-green-400' : 'bg-slate-800/40 border-slate-700 text-slate-500'}`}>
                                                ${getPublicStatus() ? '‚óè PUBLIC STATUS' : '‚óã HIDDEN STATUS'}
                                            </button>
                                        `}
                                    </div>
                                </div>

                                <div className="flex-1">
                                    ${activeTab === 'notice' && html`
                                        <div className="space-y-10">
                                            <div><span className="label-text">Primary Headline</span><input value=${noticeData.title} onChange=${e => setNoticeData({...noticeData, title: e.target.value})} className="w-full font-black text-lg" placeholder="üì¢ IMPORTANT NOTICE"/></div>
                                            <div><span className="label-text">Body Content (Full Text)</span><textarea rows="10" value=${noticeData.message.join('\n')} onChange=${e => setNoticeData({...noticeData, message: e.target.value.split('\n')})} className="w-full resize-none leading-relaxed" placeholder="Enter full notice body..."/></div>
                                            <div><span className="label-text">Version Tag</span><input value=${noticeData.updates?.version || ''} onChange=${e => setNoticeData({...noticeData, updates: {...noticeData.updates, version: e.target.value}})} className="w-full text-orange-500 font-black" placeholder="New App Updates v2.1"/></div>
                                            <div>
                                                <div className="flex justify-between items-center mb-5">
                                                    <span className="label-text !mb-0">Changelog Items</span>
                                                    <button onClick=${() => setNoticeData({...noticeData, updates: {...noticeData.updates, items: [...(noticeData.updates?.items || []), '']}})} className="bg-orange-600/10 text-orange-500 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-orange-500/20 transition-all">+ Add New Line</button>
                                                </div>
                                                <div className="space-y-3">
                                                    ${(noticeData.updates?.items || []).map((item, idx) => html`
                                                        <div key=${idx} className="flex gap-3 animate-slide-up">
                                                            <input value=${item} onChange=${e => {
                                                                const items = [...noticeData.updates.items];
                                                                items[idx] = e.target.value;
                                                                setNoticeData({...noticeData, updates: {...noticeData.updates, items}});
                                                            }} className="flex-1 !bg-black/30 border-slate-800" />
                                                            <button onClick=${() => {
                                                                const items = noticeData.updates.items.filter((_, i) => i !== idx);
                                                                setNoticeData({...noticeData, updates: {...noticeData.updates, items}});
                                                            }} className="w-12 h-12 bg-red-900/10 text-red-500 rounded-2xl flex items-center justify-center transition-all">‚úï</button>
                                                        </div>
                                                    `)}
                                                </div>
                                            </div>
                                        </div>
                                    `}
                                    ${activeTab === 'popup' && html`
                                        <div className="space-y-10">
                                            <div><span className="label-text">Primary Headline</span><input value=${announcementData.title} onChange=${e => setAnnouncementData({...announcementData, title: e.target.value})} className="w-full font-black text-lg" placeholder="üì¢ ANNOUNCEMENT"/></div>
                                            <div><span className="label-text">Body Content (Full Text)</span><textarea rows="12" value=${announcementData.message} onChange=${e => setAnnouncementData({...announcementData, message: e.target.value})} className="w-full resize-none leading-relaxed" placeholder="Enter popup message..."/></div>
                                        </div>
                                    `}
                                    ${activeTab === 'events' && html`
                                        <div className="space-y-10">
                                            <button onClick=${() => setEventsData({...eventsData, events: [{title: 'üìÖ Upcoming College Events', content: ['Detail Line'], theme: {gradient: ["#00f2fe", "#4facfe"], glow: "rgba(79,172,254,0.5)"}}, ...eventsData.events]})} className="w-full py-5 border-2 border-dashed border-slate-800 rounded-[2rem] text-[11px] font-black text-slate-600 uppercase tracking-widest hover:text-orange-500 transition-all">+ ADD NEW EVENT CARD</button>
                                            ${eventsData.events.map((ev, i) => html`
                                                <div key=${i} className="bg-black/30 p-8 rounded-[2.5rem] border border-slate-800 space-y-6 relative group animate-slide-up">
                                                    <button onClick=${() => setEventsData({...eventsData, events: eventsData.events.filter((_, idx) => idx !== i)})} className="absolute top-6 right-6 text-red-500 opacity-30 hover:opacity-100 transition-all">‚úï</button>
                                                    <div><span className="label-text">Event Headline</span><input value=${ev.title} onChange=${e => { const up = [...eventsData.events]; up[i].title = e.target.value; setEventsData({...eventsData, events: up}); }} className="w-full font-bold" /></div>
                                                    <div><span className="label-text">Description (Full Text)</span><textarea rows="5" value=${ev.content.join('\n')} onChange=${e => { const up = [...eventsData.events]; up[i].content = e.target.value.split('\n'); setEventsData({...eventsData, events: up}); }} className="w-full resize-none text-xs" /></div>
                                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                                        <div><span className="label-text">Color 1</span><input type="color" value=${ev.theme?.gradient[0]} onChange=${e => { const up = [...eventsData.events]; up[i].theme.gradient[0] = e.target.value; setEventsData({...eventsData, events: up}); }} className="w-full h-12 p-1 bg-transparent cursor-pointer" /></div>
                                                        <div><span className="label-text">Color 2</span><input type="color" value=${ev.theme?.gradient[1]} onChange=${e => { const up = [...eventsData.events]; up[i].theme.gradient[1] = e.target.value; setEventsData({...eventsData, events: up}); }} className="w-full h-12 p-1 bg-transparent cursor-pointer" /></div>
                                                        <div><span className="label-text">Glow Effect (RGBA)</span><input value=${ev.theme?.glow} onChange=${e => { const up = [...eventsData.events]; up[i].theme.glow = e.target.value; setEventsData({...eventsData, events: up}); }} className="w-full !p-3 text-[10px]" /></div>
                                                    </div>
                                                </div>
                                            `)}
                                        </div>
                                    `}
                                    ${activeTab === 'security' && html`
                                        <div className="space-y-12">
                                            ${!isSecurityUnlocked ? html`
                                                <div className="flex-1 flex flex-col items-center justify-center space-y-10 text-center py-20">
                                                    <div className="text-7xl animate-pulse">üîê</div>
                                                    <h3 className="text-sm font-black text-slate-500 uppercase tracking-widest">Restricted Security Console</h3>
                                                    <form onSubmit=${unlockSecurityTab} className="w-full max-w-xs space-y-5">
                                                        <input type="password" autoFocus value=${securityPinInput} onChange=${e => setSecurityPinInput(e.target.value)} className="w-full bg-black/60 border border-slate-800 p-5 rounded-3xl text-center font-mono tracking-widest text-lg outline-none focus:border-orange-500 text-white transition-all" placeholder="MASTER PIN"/>
                                                        <button type="submit" className="w-full bg-white text-black font-black py-4 rounded-3xl text-[10px] uppercase shadow-xl transition-all active:scale-95">Unlock Console</button>
                                                    </form>
                                                </div>
                                            ` : html`
                                                <div className="space-y-12 animate-slide-up">
                                                    <div className="space-y-8 pb-12 border-b border-slate-800/50">
                                                        <div className="flex justify-center mb-6">
                                                            <button onClick=${() => setIsSecurityUnlocked(false)} className="px-10 py-3.5 bg-white text-black rounded-[2rem] font-black text-[10px] uppercase shadow-xl hover:bg-slate-200 transition-all">‚úï Close Settings</button>
                                                        </div>
                                                        <div className="grid grid-cols-1 gap-8 max-w-xl mx-auto">
                                                            <div><span className="label-text">Access Token</span><input type="password" value=${config.token} onChange=${e => setConfig({...config, token: e.target.value})} className="w-full text-center font-mono py-4" placeholder="GITHUB PERSONAL ACCESS TOKEN"/></div>
                                                            <div><span className="label-text">Repo Owner</span><input value=${config.owner} onChange=${e => setConfig({...config, owner: e.target.value})} className="w-full text-center py-4" placeholder="PawanxumanG"/></div>
                                                            <div><span className="label-text">Repo Name</span><input value=${config.repo} onChange=${e => setConfig({...config, repo: e.target.value})} className="w-full text-center py-4" placeholder="rr-college"/></div>
                                                        </div>
                                                    </div>

                                                    <div className="bg-green-600/10 border border-green-500/40 p-6 rounded-[2.5rem] text-center">
                                                        <h2 className="text-green-400 font-black text-xl uppercase tracking-widest">WELCOME, NEW ADMIN</h2>
                                                    </div>
                                                    <div className="flex justify-between items-center">
                                                        <h3 className="text-xs font-black text-orange-500 uppercase tracking-widest">Keys Manager</h3>
                                                        <button onClick=${() => setLoginData({keys: [{id: Date.now(), owner: 'Admin User', key: 'RR-'+Math.random().toString(36).substring(2,8).toUpperCase(), expiry: '01/03/2026', isActive: true, deviceLock: false}, ...loginData.keys]})} className="bg-orange-600 px-6 py-2.5 rounded-xl text-[10px] font-black uppercase text-white hover:bg-orange-500 transition-all">+ NEW KEY</button>
                                                    </div>
                                                    <div className="space-y-8">
                                                        ${loginData.keys.map((k, idx) => html`
                                                            <div key=${k.id} className="bg-[#111827]/30 p-8 rounded-[3rem] border border-slate-800 flex flex-col gap-8 relative group animate-slide-up">
                                                                <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                                                    <div><span className="label-text">Owner</span><input value=${k.owner} onChange=${e => { const up = [...loginData.keys]; up[idx].owner = e.target.value; setLoginData({keys: up}); }} className="w-full font-bold bg-transparent border-none border-b !rounded-none !p-2 focus:border-orange-500"/></div>
                                                                    <div><span className="label-text">Key Code</span><input value=${k.key} onChange=${e => { const up = [...loginData.keys]; up[idx].key = e.target.value.toUpperCase(); setLoginData({keys: up}); }} className="w-full text-orange-500 font-mono font-bold bg-transparent border-none border-b !rounded-none !p-2 focus:border-orange-500"/></div>
                                                                </div>
                                                                <div>
                                                                    <span className="label-text">Expiry Date</span>
                                                                    <input value=${k.expiry} onChange=${e => { const up = [...loginData.keys]; up[idx].expiry = e.target.value; setLoginData({keys: up}); }} className="w-full" placeholder="01/03/2026" />
                                                                </div>
                                                                <div className="bg-black/50 border border-dashed border-slate-800 rounded-2xl p-6 flex flex-col gap-2">
                                                                    <span className="text-[10px] font-black text-slate-500 uppercase tracking-widest leading-relaxed">Device Lock: ${k.deviceLock ? 'Enabled' : 'Not Set (Strict 1-Device Policy)'}</span>
                                                                </div>
                                                                <div className="flex items-center justify-between border-t border-slate-800 pt-6">
                                                                    <button onClick=${() => { const up = [...loginData.keys]; up[idx].isActive = !up[idx].isActive; setLoginData({keys: up}); }} className=${`px-12 py-3.5 rounded-2xl text-[10px] font-black uppercase transition-all ${k.isActive ? 'bg-green-600/10 border border-green-500 text-green-400' : 'bg-slate-800 border border-slate-700 text-slate-500'}`}>${k.isActive ? 'ACTIVE' : 'DISABLED'}</button>
                                                                    <button onClick=${() => setLoginData({keys: loginData.keys.filter((_, i) => i !== idx)})} className="text-red-500 hover:scale-125 transition-all text-xl p-2">‚úï</button>
                                                                </div>
                                                            </div>
                                                        `)}
                                                    </div>
                                                </div>
                                            `}
                                        </div>
                                    `}
                                </div>
                                <button onClick=${handlePublish} disabled=${loading || !shas[activeTab]} className="btn-apply w-full mt-10">üöÄ APPLY LIVE CHANGES</button>
                            </section>
                        </main>

                        <aside className="lg:col-span-4 animate-slide-up">
                            <section className="glass-panel p-8 rounded-[3.5rem] sticky top-8 flex flex-col h-[calc(100vh-10rem)] overflow-hidden">
                                <h3 className="text-[10px] font-black text-slate-500 uppercase tracking-widest mb-10 flex items-center gap-3">
                                    <span className="w-2.5 h-2.5 rounded-full bg-green-500 animate-pulse"></span> Dynamic Preview (Full View)
                                </h3>
                                
                                <div className="flex-1 bg-[#050505] rounded-[2.5rem] p-8 overflow-y-auto custom-scrollbar shadow-inner flex flex-col items-center justify-center gap-8 text-center">
                                    ${activeTab === 'notice' && html`
                                        <div className="w-full bg-[#161a22] p-8 rounded-[2.5rem] border border-slate-800 relative overflow-hidden shadow-2xl animate-slide-up text-left ${!noticeData.show ? 'opacity-30 grayscale' : ''}">
                                            <div className="absolute top-0 left-0 w-full h-1.5 bg-orange-600"></div>
                                            <h4 className="text-orange-500 font-black text-xl uppercase mb-6">${noticeData.title || 'üì¢ IMPORTANT NOTICE'}</h4>
                                            <div className="space-y-4">${noticeData.message.map((l, i) => html`<p key=${i} className="text-slate-400 text-[11px] font-medium leading-relaxed">${l}</p>`)}</div>
                                            ${noticeData.updates?.version && html`
                                                <div className="mt-10 pt-6 border-t border-slate-800 flex flex-col gap-3">
                                                    <span className="text-orange-500 text-[11px] font-black uppercase tracking-widest">${noticeData.updates.version}</span>
                                                    <div className="flex flex-col gap-2.5">${(noticeData.updates.items || []).map((it, ii) => html`<span key=${ii} className="text-slate-500 text-[10px] font-bold uppercase tracking-wide">‚Ä¢ ${it}</span>`)}</div>
                                                </div>
                                            `}
                                        </div>
                                    `}
                                    ${activeTab === 'popup' && html`
                                        <div className="w-full max-w-[320px] bg-[#1a1f2e] p-10 rounded-[3.5rem] text-center shadow-[0_0_80px_rgba(249,115,22,0.25)] animate-slide-up relative border border-slate-800 ${!announcementData.show ? 'opacity-30 grayscale' : ''}">
                                            <div className="text-4xl mb-6">üì¢</div>
                                            <h4 className="text-white font-black text-2xl uppercase mb-5 tracking-tighter">${announcementData.title || 'HELLO EVERYONE!! üòÉ'}</h4>
                                            <p className="text-slate-400 text-[11px] font-medium mb-12 leading-relaxed">${announcementData.message || 'Announcement content will appear here.'}</p>
                                            <button className="w-full py-5 bg-gradient-to-r from-orange-600 to-orange-500 text-white font-black rounded-3xl text-[10px] uppercase tracking-widest shadow-xl">DISMISS MODAL</button>
                                        </div>
                                    `}
                                    ${activeTab === 'events' && (eventsData.events.length > 0 ? eventsData.events.map((ev, i) => html`
                                        <div key=${i} className="w-full p-10 rounded-[3rem] text-white shadow-2xl animate-slide-up text-left ${!eventsData.show ? 'opacity-30 grayscale' : ''}" style=${{ background: `linear-gradient(135deg, ${ev.theme?.gradient?.join(', ') || '#161a22, #0d1117'})`, boxShadow: `0 20px 60px ${ev.theme?.glow || 'transparent'}` }}>
                                            <h4 className="text-2xl font-black uppercase mb-6 leading-tight">${ev.title || 'EVENT'}</h4>
                                            <div className="space-y-3">${ev.content.map((l, ii) => html`<p key=${ii} className="text-[11px] font-medium opacity-90 leading-relaxed">‚Ä¢ ${l}</p>`)}</div>
                                        </div>
                                    `) : html`<div className="opacity-20 text-[10px] font-black uppercase tracking-widest">No Events Found</div>`)}
                                    ${activeTab === 'security' && html`
                                        <div className="space-y-8 opacity-20">
                                            <div className="text-7xl">üîê</div>
                                            <p className="text-[11px] font-black uppercase tracking-[0.5em]">Live Preview Restricted</p>
                                        </div>
                                    `}
                                </div>
                            </section>
                        </aside>
                    </div>

                    <footer className="text-center pt-24 pb-12 flex flex-col items-center gap-10">
                        <div className="flex items-center gap-12">
                            <div className="h-px w-24 bg-slate-800"></div>
                            <span className="text-[9px] font-black uppercase tracking-[1.2em] text-slate-700">Official Secure Gateway</span>
                            <div className="h-px w-24 bg-slate-800"></div>
                        </div>
                        <div className="flex flex-col items-center gap-2 mt-4">
                            <div className="bg-[#111827] border border-orange-500/20 px-8 py-3.5 rounded-[2rem] shadow-xl flex items-center gap-4">
                                <span className="text-[10px] font-black text-slate-500 uppercase tracking-widest">Made By</span>
                                <span className="h-4 w-px bg-slate-800"></span>
                                <span className="text-[12px] uppercase tracking-[0.2em] name-highlight">Pawan Ponnam</span>
                            </div>
                        </div>
                        <p className="text-[10px] font-bold text-slate-900 uppercase tracking-[0.6em] opacity-40">RR College Management Dashboard v4.2</p>
                    </footer>
                </div>
            `;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>